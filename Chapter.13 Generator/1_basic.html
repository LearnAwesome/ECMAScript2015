<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
	</head>
	<body>
		<script type="text/javascript">
			// Generator
				// 基本用法
					// function* 声明
					// 返回遍历器对象[Symbol.iterator]
					// 用next改变内部指针
					// 多个yield & 一个return

					// function* helloWorldGenerator() {
					// 	yield "hello";
					// 	yield "world";
					// 	return "ending";
					// }
					// const hw = helloWorldGenerator();
					// console.log( hw.next() ); // {value: "hello", done: false}
					// console.log( hw.next() ); // {value: "world", done: false}
					// console.log( hw.next() ); // {value: "ending", done: true}
					// console.log( hw.next() ); // {value: undefined, done: true}
				
				// 惰性函数
					// 必须对遍历器对象执行next方法才能改变指针并执行改变过程中的语句
					// function* f() {
					// 	yield console.log(1 + 2);
					// }
					// const g = f();
					// setTimeout( () => {
					// 	console.log( g.next() ); // 3 {value: undefined, done: false}
					// 	console.log( g.next() ); // {value: undefined, done: true}
					// }, 2000 );

				// yield只能存在于当前代码块为Generator函数中，不能存在于普通函数中
					const arr = [1, [ [2, 3], 4], [5] ];
					// 错误
					// const flat = function* (a) {
					// 	a.forEach(function(item) {
					// 		if (typeof item === "number") {
					// 			yield* flat(item);
					// 		} else {
					// 			yield item; // 语法错误
					// 		}
					// 	});
					// }

					//正确
					// const flat = function* (a) {
					// 	const len = a.length;
					// 	for (let i = 0; i < len; i ++) {
					// 		const item = a[i];
					// 		if (typeof item !== "number") {
					// 			yield* flat(item);
					// 		} else {
					// 			yield item;
					// 		}
					// 	}
					// }
					// for (let f of flat(arr)) {
					// 	console.log(f); // 1 2 3 4 5
					// }

				// generator[Symbol.iterator] === generator
					// 任何一个对象的Symbol.iterator方法都严格等于该对象的遍历器对象生成函数
					// 遍历器对象本身也有Symbol.iterator方法，执行后返回自身
					// function* gen() {
					// 	// some code
					// }
					// const g = gen();
					// console.log(g[Symbol.iterator]() === g); // true
		</script>
	</body>
</html>
